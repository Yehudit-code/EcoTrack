diff a/src/app/api/consumption/route.ts b/src/app/api/consumption/route.ts	(rejected hunks)
@@ -35,13 +35,24 @@ export async function POST(req: Request) {
     await connectDB();
     const body = await req.json();
 
-    const { userEmail, category, month, year } = body;
+    const { userEmail, category, month, year, value } = body;
 
-    if (!userEmail || !category || !month || !year) {
+    if (!userEmail || !category || !month || !year || value == null) {
       return fail("Missing required fields", 400);
     }
 
-    // Check if record exists for this user+category+month+year
+    // ⬅️ שליפת הצריכה הקודמת של המשתמש באותה קטגוריה
+    const lastRecord = await ConsumptionHabit.findOne({
+      userEmail,
+      category,
+    })
+      .sort({ year: -1, month: -1 }) // חשוב - כדי לקבל את האחרונה
+      .lean() as any;
+
+    // ⬅️ הגדרת previousValue אוטומטית
+    const previousValue = lastRecord?.value ?? null;
+
+    // בדיקה אם קיים כבר רישום לחודש הזה → עדכון
     const existing = await ConsumptionHabit.findOne({
       userEmail,
       category,
@@ -50,16 +61,23 @@ export async function POST(req: Request) {
     });
 
     if (existing) {
-      // Update instead of creating a duplicate
       const updated = await ConsumptionHabit.findByIdAndUpdate(
         existing._id,
-        body,
+        {
+          ...body,
+          previousValue, // ⬅️ חשוב!
+        },
         { new: true }
       );
       return ok(updated);
     }
 
-    const created = await ConsumptionHabit.create(body);
+    // יצירת רשומה חדשה
+    const created = await ConsumptionHabit.create({
+      ...body,
+      previousValue, // ⬅️ נשמר כאן
+    });
+
     return ok(created);
   } catch (err) {
     console.error("POST error:", err);
@@ -67,6 +85,7 @@ export async function POST(req: Request) {
   }
 }
 
+
 export async function PUT(req: Request) {
   try {
     await connectDB();
